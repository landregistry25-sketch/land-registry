<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Verify Land - Land Registry</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <style>
    :root{
      --bg:#ffffff;
      --card:#ffffff;
      --text:#000000;
      --border:#d3d3d3;
      --accent:black;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:"Montserrat","Segoe UI",Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* --------------------------------------
       NEW NAVBAR (Copied from your sell page)
       Same dimensions, but BLACK theme
       -------------------------------------- */
    .navbar {
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 35px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.35);
      border-bottom: 2px solid #333;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .back-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 42px;
      height: 42px;
      border-radius: 10px;
      background-color: #000000;
      color: rgb(255, 255, 255);
      border: none;
      font-size: 22px;
      cursor: pointer;
      transition: 0.3s;
      text-decoration: none;
    }
    .back-btn:hover {
      background: black;
    }

    .nav-title {
      font-size: 22px;
      font-weight: 700;
      color: black;
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .nav-right a {
      color: rgb(0, 0, 0);
      font-weight: 600;
      text-decoration: none;
      padding: 7px 13px;
      border-radius: 6px;
      transition: background 0.2s;
    }
    .nav-right a:hover {
      background: #9a9a9a;
    }

    /* MAIN CONTAINER */
    .container{
      max-width:950px;
      margin:40px auto;
      background:white;
      padding:30px;
      border-radius:14px;
      border:1px solid var(--border);
      box-shadow:0 6px 25px rgba(0,0,0,0.12);
    }

    h2{
      font-size:26px;
      font-weight:800;
      text-align:center;
      margin-bottom:20px;
    }

    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:20px;
    }
    .full{ grid-column:1/-1; }

    label{
      display:block;
      margin-top:14px;
      font-weight:700;
    }

    input,select,textarea{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:2px solid var(--border);
      margin-top:8px;
      font-size:15px;
    }

    input:focus,select:focus,textarea:focus{
      border-color:black;
      outline:none;
    }

    textarea{ min-height:100px; }

    /* FILE UPLOAD */
    .upload-box{
      border:2px dashed black;
      border-radius:10px;
      padding:14px;
      margin-top:8px;
      background:#fafafa;
      display:flex;
      justify-content:space-between;
      align-items:center;
      cursor:pointer;
      font-weight:700;
    }
    .upload-box:hover{ background:#f0f0f0; }

    .pdf-preview{
      display:none;
      border:2px solid black;
      padding:12px;
      margin-top:10px;
      border-radius:10px;
      background:white;
    }

    .pdf-frame{
      width:100%;
      height:350px;
      border-radius:8px;
      border:1px solid black;
    }

    .btn-view{
      background:black;
      color:white;
      padding:8px 12px;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
    }

    .img-preview-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .img-preview-row img{
      width:140px;
      height:100px;
      object-fit:cover;
      border:2px solid black;
      border-radius:8px;
    }

    button{
      width:100%;
      padding:15px;
      background:black;
      color:white;
      border:none;
      font-size:16px;
      font-weight:800;
      margin-top:20px;
      border-radius:10px;
      cursor:pointer;
    }
    button:hover{ background:#222; }

    .blur-active{
      filter:blur(5px);
      pointer-events:none;
      user-select:none;
    }

    #popup{
      display:none;
      position:fixed;
      top:50%; left:50%;
      transform:translate(-50%,-50%) scale(0.6);
      background:black;
      padding:38px 40px;
      border-radius:18px;
      color:white;
      border:2px solid white;
      width:360px;
      text-align:center;
      font-size:20px;
      font-weight:900;
      z-index:999;
      animation:popupIn 0.35s forwards ease-out;
      box-shadow:0 18px 50px rgba(0,0,0,0.45);
    }

    #popup img{
      width:150px;
      margin-bottom:10px;
      opacity:0;
      animation:popTick 0.45s ease-out forwards;
    }

    @keyframes popupIn{
      from{ transform:translate(-50%,-50%) scale(0.3); opacity:0; }
      to{ transform:translate(-50%,-50%) scale(1); opacity:1; }
    }

    @keyframes popTick{
      0%{ transform:scale(0.3); opacity:0; }
      70%{ transform:scale(1.15); opacity:1; }
      100%{ transform:scale(1); opacity:1; }
    }

    /* Remove up/down arrows in number fields */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

  </style>
</head>

<body>

  <!-- UPDATED BLACK NAVBAR -->
  <div class="navbar">
    <div class="nav-left">
      <a href="{{ url_for('home') }}" class="back-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
             stroke-width="4" stroke-linecap="round" stroke-linejoin="round"
             width="28" height="28" viewBox="0 0 24 24">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </a>
      <span class="nav-title">Verify Land</span>
    </div>

    <div class="nav-right">
      <a href="{{ url_for('help_page') }}">Help</a>
      <a href="{{ url_for('contact') }}">Contact</a>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="container">
    <h2>Submit Land for Verification</h2>

    <form id="verifyForm" method="POST" enctype="multipart/form-data" action="{{ url_for('verify_land') }}">

      <div class="grid">

        <div>
          <label>Location</label>
          <select name="location" required>
            <option value="">Select Location</option>
            <option>Hyderabad</option>
            <option>Warangal</option>
            <option>Nalgonda</option>
            <option>Khammam</option>
            <option>Karimnagar</option>
            <option>Nizamabad</option>
            <option>Mahabubnagar</option>
            <option>Adilabad</option>
            <option>Sangareddy</option>
            <option>Medchal</option>
            <option>Vikarabad</option>
            <option>Mancherial</option>
            <option>Mahabubabad</option>
            <option>Kothagudem</option>
          </select>

          <label>Size (sq.ft.)</label>
          <input type="number" name="size" required>

          <label>Land Type</label>
          <select name="type" required>
            <option value="">Select Type</option>
            <option>Residential</option>
            <option>Commercial</option>
            <option>Agricultural</option>
          </select>
        </div>

        <div>
          <label>Estimated Value (₹)</label>
          <input type="number" name="price" required>

          <label>Full Address</label>
          <input type="text" name="address" required>

          <label>Description (optional)</label>
          <textarea name="description"></textarea>
        </div>

        <!-- DOCUMENTS -->
        <div class="full">
          <h3 style="font-weight:800;">Land Documents (PDF Only)</h3>

          <label>Aadhar Card</label>
          <div class="upload-box" onclick="choose('aadhar')">Upload Aadhar (PDF)</div>
          <input id="aadhar" type="file" name="aadhar_card" accept="application/pdf" style="display:none"
                 onchange="previewPDF(this,'prev_aadhar')" required>
          <div id="prev_aadhar" class="pdf-preview"></div>

          <label>Land Map</label>
          <div class="upload-box" onclick="choose('map')">Upload Map (PDF)</div>
          <input id="map" type="file" name="land_map" accept="application/pdf" style="display:none"
                 onchange="previewPDF(this,'prev_map')" required>
          <div id="prev_map" class="pdf-preview"></div>

          <label>Sales Deed</label>
          <div class="upload-box" onclick="choose('deed')">Upload Sales Deed (PDF)</div>
          <input id="deed" type="file" name="sales_deed" accept="application/pdf" style="display:none"
                 onchange="previewPDF(this,'prev_deed')" required>
          <div id="prev_deed" class="pdf-preview"></div>

          <label>Property Tax Receipts</label>
          <div class="upload-box" onclick="choose('tax')">Upload Tax (PDF)</div>
          <input id="tax" type="file" name="property_tax_receipts" accept="application/pdf" style="display:none"
                 onchange="previewPDF(this,'prev_tax')" required>
          <div id="prev_tax" class="pdf-preview"></div>

          <label>Encumbrance Certificate</label>
          <div class="upload-box" onclick="choose('encum')">Upload EC (PDF)</div>
          <input id="encum" type="file" name="encumbrance_certificate" accept="application/pdf" style="display:none"
                 onchange="previewPDF(this,'prev_encum')" required>
          <div id="prev_encum" class="pdf-preview"></div>
        </div>

        <!-- PHOTOS -->
        <div class="full">
          <h3 style="font-weight:800;">Land Photos (Images Only)</h3>

          <div class="upload-box" onclick="choose('photos')">Upload Land Photos</div>
          <input id="photos" type="file" name="land_photos" accept="image/*" multiple style="display:none"
                 onchange="previewImages(this,'photo_row')">
          <div id="photo_row" class="img-preview-row"></div>
        </div>

      </div>

      <button onclick="submitForm(event)">Submit for Verification</button>
    </form>
  </div>

  <!-- POPUP -->
  <div id="popup">
    <img src="https://i.ibb.co/MyQ8G5yq/generated-image-1.jpg" alt="success">
    <br>
    ✔ Success! Your documents were submitted for inspection
  </div>

  <script>
    function choose(id){ document.getElementById(id).click(); }

    function previewPDF(input, box){
      const file = input.files[0];
      const cont = document.getElementById(box);
      cont.innerHTML = ""; cont.style.display = "none";

      if(!file || file.type !== "application/pdf"){
        cont.innerHTML = "<p style='color:red;font-weight:700'>Upload PDF only</p>";
        cont.style.display = "block";
        input.value = "";
        return;
      }

      const url = URL.createObjectURL(file);
      cont.innerHTML = `
        <button class="btn-view" onclick="togglePDF('${box}')">View / Hide</button>
        <iframe id="${box}_frame" class="pdf-frame" src="${url}"></iframe>
      `;
      cont.style.display = "block";
    }

    function togglePDF(box){
      let f = document.getElementById(box + "_frame");
      f.style.display = (f.style.display === "none" ? "block" : "none");
    }

    function previewImages(input, row){
      const c = document.getElementById(row);
      c.innerHTML = "";
      Array.from(input.files).forEach(f => {
        if(!f.type.startsWith("image/")) return;
        let img = document.createElement("img");
        img.src = URL.createObjectURL(f);
        c.appendChild(img);
      });
    }

    function submitForm(e){
      const form = document.getElementById("verifyForm");

      if(!form.checkValidity()){
        form.reportValidity();
        e.preventDefault();
        return;
      }

      e.preventDefault();

      document.querySelector(".container").classList.add("blur-active");
      document.querySelector(".navbar").classList.add("blur-active");

      document.getElementById("popup").style.display = "block";

      setTimeout(() => form.submit(), 2000);
    }
  </script>

</body>
</html>
