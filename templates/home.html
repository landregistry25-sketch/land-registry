<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LandRegistry</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style2.css') }}">

    <style>
        body { overflow: scroll;
        overflow-x: hidden; }

        /* Notification Badge */
        .notif-badge {
            background: red;
            color: white;
            font-size: 14px;
            padding: 3px 8px;
            border-radius: 50%;
            position: absolute;
            top: -8px;
            right: -8px;
            display: none;
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        /* Floating Notification Button */
        .floating-btn {
            position: fixed;
            bottom: 25px;
            right: 05px;
            left: 650px;
            background-color: black;
            color: #fff;
            border: none;
            font-weight: bold;
            border-radius: 50px;
            padding: 12px 25px;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, background-color 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            position: fixed;
        }

        .floating-btn:hover {
            background-color: black;
            transform: scale(1.08);
        }

        #notif-btn {
            position: relative;
        }

        /* Premium popup */
        .notif-popup {
            position: fixed;
            right: -400px; /* hidden initially */
            top: 100px;
            background: #ffffff;
            padding: 18px 22px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border-left: 6px solid #20c997;
            font-size: 17px;
            font-weight: 600;
            color: #333;
            opacity: 0;
            z-index: 9999;
            transition: all 0.6s ease;
        }

        /* glowing effect */
        .notif-popup.glow {
            box-shadow: 0 0 15px rgba(32, 201, 151, 0.8),
                        0 0 30px rgba(32,201,151,0.4);
        }
    </style>
</head>

<body>

    <!-- ======================= NAVBAR ======================= -->
    <nav class="navbar">
        <div class="logo">
            <span style="color:#222;font-weight:bold;">Land</span><span style="color:#387AFF;font-weight:bold;">Registry</span>
        </div>

        <ul class="nav-links">

            {% if session.get('user_id') %}
                <li><a href="{{ url_for('home') }}" class="active">Home</a></li>
                <li><a href="{{ url_for('about') }}">About Us</a></li>
                <li><a href="{{ url_for('features') }}">Features</a></li>
                <li><a href="{{ url_for('faqs') }}">FAQs</a></li>
                <li><a href="{{ url_for('contact') }}">Contact</a></li>

                <li class="nav-auth"><a href="{{ url_for('account_details') }}">Account</a></li>
                <li class="nav-auth2"><a href="{{ url_for('logout') }}">Logout</a></li>

            {% else %}
                <li><a href="{{ url_for('landing') }}">Home</a></li>
                <li><a href="{{ url_for('about') }}">About Us</a></li>
                <li><a href="{{ url_for('features') }}">Features</a></li>
                <li><a href="{{ url_for('faqs') }}">FAQs</a></li>
                <li><a href="{{ url_for('contact') }}">Contact</a></li>

                <li class="nav-auth"><a href="{{ url_for('login') }}">Login</a></li>
                <li class="nav-auth"><a href="{{ url_for('signin') }}">Sign Up</a></li>
            {% endif %}

        </ul>
    </nav>

    <!-- ======================= HERO ======================= -->
    <section class="hero">
        <h1>Secure Land Registry</h1>
        <h2 class="highlight">Made Simple</h2>

        <div class="hero-btns-container">

            <!-- BUY -->
            <div class="hover-box1">
                <div class="hover-area">
                    <a href="{{ url_for('buy') }}">
                        <img src="https://i.ibb.co/RTZN0PXg/buy.jpg" style="width:150px; height:100px;">
                        <br><span style="font-size: 25px;">BUY</span>
                    </a>
                </div>
            </div>

            <!-- SELL -->
            <div class="hover-box2">
                <div class="hover-area">
                    <a href="{{ url_for('shome') }}">
                        <img src="https://i.ibb.co/HDttPpVQ/IMG-20251029-WA0012.jpg" style="width:130px; height:100px;">
                        <br><span style="font-size: 25px;">SELL</span>
                    </a>
                </div>
            </div>

            <!-- TRANSFER -->
            <div class="hover-box3">
                <div class="hover-area">
                    <a href="#">
                        <img src="https://i.ibb.co/XZVfsm6r/transfer-ownership.jpg" style="width:130px; height:100px;">
                        <br><span style="font-size: 25px;">TRANSFER</span>
                    </a>
                </div>
            </div>

            <!-- VERIFY -->
            <div class="hover-boxV">
                <div class="hover-area">
                    <a href="{{ url_for('verify_land') }}">
                        <img src="https://i.ibb.co/bgxswBgh/IMG-20251029-WA0010.jpg" style="width:100px; height:100px;">
                        <br><span style="font-size: 25px;">VERIFY</span>
                    </a>
                </div>
            </div>

            <!-- RECORD -->
            <div class="hover-boxP">
                <div class="hover-area">
                    <a href="{{ url_for('myproperties') }}">
                        <img src="https://i.ibb.co/F4T6B5Pf/image-23.png" style="width:100px; height:100px;">
                        <br><span style="font-size: 25px;">RECORD</span>
                    </a>
                </div>
            </div>

        </div>

        <div class="trusted">Trusted by thousands of property owners</div>

        <div class="features-bar">
            <span><span class="dot"></span> Bank-level Security</span>
            <span><span class="dot"></span> 24/7 Support</span>
            <span><span class="dot"></span> Instant Verification</span>
        </div>

        <!-- Floating Notifications Button -->
        <a href="{{ url_for('notifications') }}" class="floating-btn" id="notif-btn">
            ðŸ”” Notifications
            <span id="notif-count" class="notif-badge">0</span>
        </a>

    </section>

    <!-- PREMIUM POPUP -->
    <div id="notif-popup" class="notif-popup">
        <span id="notif-popup-text">New notification!</span>
    </div>

    <!-- ======================= JS FOR DYNAMIC NOTIFICATIONS ======================= -->
    <script>
        let lastCount = 0;

        function showPopup(message) {
            const popup = document.getElementById("notif-popup");
            const text = document.getElementById("notif-popup-text");

            text.innerText = message;

            popup.classList.add("glow");
            popup.style.right = "30px";
            popup.style.opacity = "1";

            setTimeout(() => {
                popup.style.right = "-400px";
                popup.style.opacity = "0";
                popup.classList.remove("glow");
            }, 4000);
        }

        function updateNotificationCount() {
            fetch("/get_unseen_notifications")
                .then(response => response.json())
                .then(data => {
                    const count = data.count;
                    const badge = document.getElementById("notif-count");

                    if (count > 0) {
                        badge.innerText = count;
                        badge.style.display = "inline-block";
                    } else {
                        badge.style.display = "none";
                    }

                    // check new notifications
                    if (count > lastCount) {
                        showPopup("ðŸ”” You have a new notification!");
                    }

                    lastCount = count;
                });
        }

        // Check every 5 seconds
        setInterval(updateNotificationCount, 5000);

        // Run immediately on load
        updateNotificationCount();
    </script>

</body>
</html>
